utility funciton for version 3